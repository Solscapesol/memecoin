<html><head><base href="/"><title>Medieval Arena PvP</title><style>* { margin: 0; padding: 0; box-sizing: border-box; }body { font-family: 'MedievalSharp', cursive; background: #1a0f02; background-image: radial-gradient(circle at center, rgba(212,175,55,0.1) 0%, transparent 70%), linear-gradient(45deg, rgba(139,69,19,0.15) 25%, transparent 25%), linear-gradient(-45deg, rgba(139,69,19,0.15) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, rgba(139,69,19,0.15) 75%), linear-gradient(-45deg, transparent 75%, rgba(139,69,19,0.15) 75%); background-size: 20px 20px; background-position: 0 0, 0 10px, 10px -10px, -10px 0px; color: #d4af37; overflow: hidden; position: relative;}body::before { content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at 30% 30%, rgba(255,165,0,0.15) 0%, transparent 50%), radial-gradient(circle at 70% 70%, rgba(218,165,32,0.15) 0%, transparent 50%); animation: glowPulse 8s ease-in-out infinite; pointer-events: none; z-index: -1;}#game-container { width: 100vw; height: 100vh; position: relative;}#arena { width: 800px; height: 600px; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); background: rgba(40,26,13,0.9); border: 4px solid #8b4513; box-shadow: 0 0 30px rgba(139,69,19,0.4), inset 0 0 20px rgba(139,69,19,0.3); position: relative; overflow: hidden;}#arena::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-image: linear-gradient(45deg, rgba(0,162,255,0.1) 25%, transparent 25%), linear-gradient(-45deg, rgba(0,162,255,0.1) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, rgba(0,162,255,0.1) 75%), linear-gradient(-45deg, transparent 75%, rgba(0,162,255,0.1) 75%); background-size: 10px 10px; opacity: 0.3;}.player { width: 40px; height: 40px; position: absolute; transition: all 0.1s ease; cursor: pointer; display: flex; flex-direction: column; align-items: center;}.player-avatar { width: 40px; height: 40px; border-radius: 50%; border: 2px solid #00ffff; background-size: cover; background-position: center; background-repeat: no-repeat;}.player-name { color: #d4af37; font-size: 12px; margin-top: 5px; text-shadow: 0 0 5px rgba(139,69,19,0.5); background: rgba(40,26,13,0.9); padding: 4px 8px; border-radius: 3px; white-space: nowrap; max-width: 120px; overflow: hidden; text-overflow: ellipsis; border: 2px solid #8b4513; min-height: 25px; display: flex; align-items: center; justify-content: center;}.hp-text { font-size: 12px; color: #ff6b6b;}.player:hover .player-name { transform: scale(1.1); background: rgba(0, 8, 16, 0.9); border-color: rgba(0, 162, 255, 0.6);}.player.pepe .player-name { color: #00ff00; text-shadow: 0 0 5px rgba(0,255,0,0.5); border-color: #006400;}.player.dogecoin .player-name { color: #daa520; text-shadow: 0 0 5px rgba(218,165,32,0.5); border-color: #b8860b;}.player.shibainu .player-name { color: #cd853f; text-shadow: 0 0 5px rgba(205,133,63,0.5); border-color: #8b4513;}.health-bar { width: 40px; height: 4px; background: #001020; margin-bottom: 2px; position: relative; top: -2px; border: 1px solid rgba(0,0,0,0.3);}.health-fill { height: 100%; background: linear-gradient(90deg, #00ff00, #00ffaa); box-shadow: 0 0 10px rgba(0,255,0,0.5); transition: width 0.3s ease;}#stats-panel { position: absolute; left: 20px; top: 20px; background: rgba(40,26,13,0.9); padding: 25px; border: 2px solid #8b4513; border-radius: 5px; min-width: 300px; box-shadow: 0 0 30px rgba(139,69,19,0.4), inset 0 0 20px rgba(139,69,19,0.3);}.stat { position: relative; cursor: help; margin-bottom: 20px;}.stat:hover .stat-tooltip { display: block;}.stat-tooltip { display: none; position: absolute; left: 120%; top: 50%; transform: translateY(-50%); background: rgba(40,26,13,0.9); border: 2px solid #8b4513; border-radius: 5px; padding: 10px; width: 200px; color: #d4af37; font-size: 12px; z-index: 100;}.stat-tooltip::before { content: ''; position: absolute; left: -10px; top: 50%; transform: translateY(-50%); border-width: 5px; border-style: solid; border-color: transparent #8b4513 transparent transparent;}.stat-bar { width: 200px; height: 15px; background: rgba(40,26,13,0.9); margin-left: 10px; display: inline-block; position: relative; border-radius: 3px; overflow: hidden; border: 1px solid #8b4513;}.xp-text { position: absolute; right: -60px; top: 50%; transform: translateY(-50%); font-size: 14px; color: #d4af37; width: 70px; text-align: left;}.stat-fill { height: 100%; background: linear-gradient(90deg, #d4af37, #daa520); box-shadow: 0 0 10px rgba(139,69,19,0.5); transition: width 0.3s ease;}#combat-log { position: absolute; right: 20px; bottom: 20px; width: 300px; height: 200px; background: rgba(40,26,13,0.9); border: 2px solid #8b4513; border-radius: 5px; padding: 10px; overflow-y: auto; box-shadow: 0 0 30px rgba(139,69,19,0.4), inset 0 0 20px rgba(139,69,19,0.3);}.pillar { position: absolute; width: 30px; height: 30px; background: #00a2ff; box-shadow: 0 0 15px rgba(0,162,255,0.5); border: 2px solid #00ffff;}.level-up { animation: levelUp 1s ease-out; position: absolute; pointer-events: none;}@keyframes levelUp { 0% { transform: scale(1) translateY(0); opacity: 1; } 100% { transform: scale(2) translateY(-50px); opacity: 0; }}#attack-button { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); padding: 10px 20px; background: rgba(40,26,13,0.9); border: 2px solid #8b4513; border-radius: 5px; color: #d4af37; cursor: pointer; display: none; box-shadow: 0 0 30px rgba(139,69,19,0.4), inset 0 0 20px rgba(139,69,19,0.3);}#attack-button::after { content: '(Spacebar)'; display: block; font-size: 12px; opacity: 0.7; margin-top: 4px;}#leaderboard { position: absolute; right: 20px; top: 20px; background: rgba(40,26,13,0.9); padding: 15px; border: 2px solid #8b4513; border-radius: 5px; width: 200px; box-shadow: 0 0 30px rgba(139,69,19,0.4), inset 0 0 20px rgba(139,69,19,0.3);}#leaderboard h3 { color: #d4af37; margin-bottom: 10px; text-align: center;}.leaderboard-entry { display: flex; justify-content: space-between; margin: 5px 0; color: #d4af37;}.bitcoin-display { position: absolute; left: 20px; bottom: 20px; background: rgba(40,26,13,0.9); padding: 15px; border: 2px solid #8b4513; border-radius: 5px; color: #d4af37; font-size: 18px; z-index: 10;}#login-screen { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(26,15,2,0.95); display: flex; justify-content: center; align-items: center; z-index: 1000; transition: opacity 0.5s ease; opacity: 1;}.login-container { background: rgba(40,26,13,0.9); padding: 30px; border: 4px solid #8b4513; border-radius: 15px; width: 400px; text-align: center; box-shadow: 0 0 30px rgba(139,69,19,0.4), inset 0 0 20px rgba(139,69,19,0.3);}.character-selection { display: flex; justify-content: space-around; margin: 20px 0;}.character-option { cursor: pointer; padding: 10px; border: 2px solid transparent; border-radius: 10px; transition: all 0.3s; background: rgba(40,26,13,0.9);}.character-option:hover, .character-option.selected { border-color: #d4af37; background: rgba(60,40,20,0.9); box-shadow: 0 0 15px rgba(139,69,19,0.4);}.character-icon { width: 80px; height: 80px; margin-bottom: 10px; object-fit: cover; border-radius: 50%;}.login-input { width: 100%; padding: 10px; margin: 10px 0; background: #000000; border: 2px solid #8b4513; color: #d4af37; font-family: 'MedievalSharp', cursive;}.start-button { padding: 10px 20px; background: rgba(40,26,13,0.9); border: 2px solid #8b4513; border-radius: 5px; color: #d4af37; cursor: pointer; font-family: 'MedievalSharp', cursive; font-size: 16px; margin-top: 20px; position: relative; overflow: hidden; transition: all 0.3s ease; box-shadow: 0 0 30px rgba(139,69,19,0.4), inset 0 0 20px rgba(139,69,19,0.3);} .start-button:hover:not(:disabled) { background: rgba(60,40,20,0.9); box-shadow: 0 0 30px rgba(139,69,19,0.4);}.start-button:before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(0,162,255,0.2) 0%, rgba(0,0,0,0) 70%); opacity: 0; transition: opacity 0.3s ease;}.start-button:hover:not(:disabled):before { opacity: 1; animation: pulse 2s infinite; }@keyframes pulse { 0% { transform: scale(0.95); opacity: 0.7; } 50% { transform: scale(1.05); opacity: 0.9; } 100% { transform: scale(0.95); opacity: 0.7; }}.login-container { animation: slideIn 0.5s ease; transform-origin: center;}@keyframes slideIn { 0% { transform: translateY(-20px); opacity: 0; } 100% { transform: translateY(0); opacity: 1; }}.success-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(76, 175, 80, 0.2); z-index: 1001; opacity: 0; pointer-events: none; transition: opacity 0.3s ease;}.success-message { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(40,26,13,0.9); padding: 20px; border: 2px solid #8b4513; border-radius: 10px; color: #d4af37; text-align: center; z-index: 1002; opacity: 0; transition: all 0.3s ease;}.player.pepe .player-avatar { border-color: #00ff00;}.player.dogecoin .player-avatar { border-color: #daa520;}.player.shibainu .player-avatar { border-color: #cd853f;}.player.targeted { animation: targetPulse 1.5s infinite;}@keyframes targetPulse { 0% { box-shadow: 0 0 0 0 rgba(0,162,255,0.4); } 70% { box-shadow: 0 0 0 10px rgba(0,162,255,0); }}/* Add new CSS for interactive objects */.interactive-object { position: absolute; cursor: pointer; transition: transform 0.3s ease; filter: drop-shadow(0 0 5px rgba(0,162,255,0.5)); z-index: 1;}.interactive-object:hover { transform: scale(1.1); filter: drop-shadow(0 0 10px rgba(0,162,255,0.8));}.treasure-chest { width: 50px; height: 50px;}.weapon { width: 40px; height: 40px;}.flame { width: 40px; height: 40px; position: absolute; transition: left 2s ease-in-out, top 2s ease-in-out; pointer-events: none; z-index: 5;}.damage-effect { animation: damageFlash 0.5s; }@keyframes damageFlash { 0%, 100% { filter: none; } 50% { filter: brightness(2) saturate(2); }}/* Add to existing CSS */#chat-box { position: absolute; right: 20px; bottom: 20px; width: 300px; height: 200px; background: rgba(40,26,13,0.9); border: 2px solid #8b4513; border-radius: 5px; display: flex; flex-direction: column; overflow: hidden; }#chat-messages { flex-grow: 1; overflow-y: auto; padding: 10px; color: #d4af37; display: flex; flex-direction: column; gap: 5px; font-size: 14px; line-height: 1.4; max-height: calc(200px - 40px); }#chat-messages div { word-wrap: break-word; padding: 3px 5px; background: rgba(40,26,13,0.5); border-radius: 3px; border: 1px solid rgba(139,69,19,0.2); }#chat-messages div:hover { background: rgba(40,26,13,0.8); border-color: rgba(139,69,19,0.4); }#chat-input { padding: 8px; background: rgba(40,26,13,0.9); border-top: 2px solid #8b4513; display: flex; gap: 5px; }#chat-input input { flex-grow: 1; background: rgba(40,26,13,0.9); border: 1px solid #8b4513; padding: 5px 10px; color: #d4af37; border-radius: 3px; font-family: inherit; }#chat-input button { background: rgba(40,26,13,0.9); border: 1px solid #8b4513; color: #d4af37; padding: 5px 15px; cursor: pointer; border-radius: 3px; transition: all 0.2s ease; }#chat-input button:hover { background: rgba(60,40,20,0.9); box-shadow: 0 0 10px rgba(139,69,19,0.4); }.damage-number { position: absolute; color: #ff3333; font-size: 20px; font-weight: bold; text-shadow: 0 0 5px rgba(0,0,0,0.5); animation: floatUp 1s ease-out forwards; pointer-events: none; z-index: 1000; }@keyframes floatUp { 0% { transform: translateY(0) scale(1); opacity: 1; } 100% { transform: translateY(-50px) scale(1.5); opacity: 0; }}/* Add CSS for death popup */#death-popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(40,26,13,0.95); border: 4px solid #8b4513; padding: 30px 50px; text-align: center; z-index: 1000; animation: deathPopup 0.5s ease-out; box-shadow: 0 0 30px rgba(139,69,19,0.4), inset 0 0 20px rgba(139,69,19,0.3); display: none; border-radius: 10px; }#death-popup h2 { color: #d4af37; text-shadow: 0 0 10px rgba(139,69,19,0.5); }#back-to-lobby { padding: 15px 30px; background: rgba(40,26,13,0.9); border: 2px solid #8b4513; color: #d4af37; font-size: 18px; cursor: pointer; transition: all 0.3s ease; border-radius: 5px; font-family: 'MedievalSharp', cursive; }#back-to-lobby:hover { background: rgba(60,40,20,0.9); box-shadow: 0 0 20px rgba(139,69,19,0.4); }/* Add these styles */.round-end-popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(40,26,13,0.95); border: 4px solid #8b4513; padding: 30px; text-align: center; color: #d4af37; border-radius: 10px; box-shadow: 0 0 30px rgba(139,69,19,0.4), inset 0 0 20px rgba(139,69,19,0.3); z-index: 1000; } .round-end-popup h2 { font-size: 32px; margin-bottom: 20px; text-shadow: 0 0 10px rgba(218,165,32,0.5); } .round-end-popup button { margin-top: 20px; padding: 10px 20px; background: rgba(40,26,13,0.9); border: 2px solid #8b4513; color: #d4af37; cursor: pointer; font-family: inherit; font-size: 18px; border-radius: 5px; transition: all 0.3s ease; } .round-end-popup button:hover { background: rgba(60,40,20,0.9); box-shadow: 0 0 20px rgba(139,69,19,0.4); }/* Add damage effect animation */.damage-effect { animation: flameDamage 0.5s; }@keyframes flameDamage { 0%, 100% { filter: none; } 50% { filter: brightness(2) saturate(2) hue-rotate(45deg); }} #return-to-lobby { padding: 15px 30px; background: rgba(40,26,13,0.9); border: 2px solid #8b4513; color: #d4af37; font-size: 18px; cursor: pointer; transition: all 0.3s ease; border-radius: 5px; font-family: 'MedievalSharp', cursive; margin-top: 20px; } #return-to-lobby:hover { background: rgba(60,40,20,0.9); box-shadow: 0 0 20px rgba(139,69,19,0.4); } </style><link href="https://fonts.googleapis.com/css2?family=MedievalSharp&amp;display=swap" rel="stylesheet"></head><body><audio id="sword-clash" src="https://assets.mixkit.co/sfx/preview/mixkit-sword-slash-swoosh-1476.mp3" preload="auto"></audio><audio id="levelup-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3" preload="auto"></audio><audio id="crowd-ambient" src="https://assets.mixkit.co/sfx/preview/mixkit-stadium-crowd-light-applause-362.mp3" preload="auto" loop=""></audio><audio id="pepe-attack" src="https://assets.mixkit.co/sfx/preview/mixkit-sword-slash-swoosh-1476.mp3" preload="auto"></audio><audio id="doge-attack" src="https://assets.mixkit.co/sfx/preview/mixkit-heavy-sword-hit-2794.mp3" preload="auto"></audio><audio id="shiba-attack" src="https://assets.mixkit.co/sfx/preview/mixkit-metal-shield-impact-2767.mp3" preload="auto"></audio><div id="login-screen"><div class="login-container"><h2>Enter the Arena</h2><input type="text" id="username-input" class="login-input" placeholder="Enter your username" maxlength="15"><h3>Choose Your Class</h3><div class="character-selection"><div class="character-option" data-class="pepe"><img src="/PEPE GAME.jpg" class="character-icon" alt="PEPE - thinking pepe frog character"><div>PEPE</div><small>Balanced</small></div><div class="character-option" data-class="dogecoin"><img src="/DOGE GAME.jpeg" class="character-icon" alt="Dogecoin - doge meme character"><div>Dogecoin</div><small>High Defense</small></div><div class="character-option" data-class="shibainu"><img src="/SHIBA INU GAME.jpg" class="character-icon" alt="Shiba Inu - stylized shiba inu character"><div>Shiba Inu</div><small>High Strength</small></div></div><div class="error-message" id="error-message"></div><button class="start-button" id="start-game" disabled="">Enter Arena</button></div></div><div class="success-overlay"><div class="success-message"><h3>Welcome to the Arena!</h3><p>Prepare for battle...</p></div></div><div id="game-container"><div id="leaderboard"><h3>Top Players</h3></div><div class="bitcoin-display">Bitcoin: <span id="bitcoin-amount">0</span> BTC</div><div id="arena"><script>let roundTime = 60; let roundTimer = null; let isRoundActive = false; let flamePositions = [ { x: Math.random() * 700 + 50, y: Math.random() * 500 + 50 }, { x: Math.random() * 700 + 50, y: Math.random() * 500 + 50 } ]; function getRandomPosition() { return { x: Math.random() * 700 + 50, y: Math.random() * 500 + 50 }; } function moveFlamesRandomly() { const flames = document.querySelectorAll('.flame'); flames.forEach((flame, index) => { const angle = Math.random() * Math.PI * 4 - Math.PI * 2; const distance = Math.random() * 200; let newX = flamePositions[index].x + Math.cos(angle) * distance; let newY = flamePositions[index].y + Math.sin(angle) * distance; if (Math.random() < 0.2) { newX += (Math.random() - 0.5) * 100; newY += (Math.random() - 0.5) * 100; } newX = Math.max(50, Math.min(750, newX)); newY = Math.max(50, Math.min(550, newY)); flamePositions[index].x = newX; flamePositions[index].y = newY; flame.style.transition = 'left 2s cubic-bezier(0.4, 0, 0.2, 1), top 2s cubic-bezier(0.4, 0, 0.2, 1)'; flame.style.left = `${newX}px`; flame.style.top = `${newY}px`; }); } setInterval(() => { if (isRoundActive) { moveFlamesRandomly(); } }, 2000); function checkFlameCollision() { const player = document.getElementById(`player-${room.party.client.id}`); if (!player) return; const playerRect = player.getBoundingClientRect(); const flames = document.querySelectorAll('.flame'); flames.forEach(flame => { const flameRect = flame.getBoundingClientRect(); if (!(playerRect.right < flameRect.left || playerRect.left > flameRect.right || playerRect.bottom < flameRect.top || playerRect.top > flameRect.bottom)) { if (playerStats.health > 0) { const flameDamage = 15; playerStats.health = Math.max(0, playerStats.health - flameDamage); const healthBar = player.querySelector('.health-fill'); healthBar.style.width = `${playerStats.health}%`; player.classList.add('damage-effect'); setTimeout(() => player.classList.remove('damage-effect'), 500); addCombatLog('You took damage from flame!'); if (playerStats.health <= 0) { addCombatLog('You were burned to death!'); handlePlayerDeath(); } } } }); } function initializeInteractiveObjects() { const arena = document.getElementById('arena'); arena.querySelectorAll('.interactive-object, .flame').forEach(obj => obj.remove()); const chest = document.createElement('div'); chest.className = 'interactive-object treasure-chest glowing'; const chestImg = document.createElement('img'); chestImg.src = '/Treasure chest.png'; chestImg.alt = 'A pixel art treasure chest filled with gems'; chestImg.width = 50; chestImg.height = 50; chest.appendChild(chestImg); const chestPos = getRandomPosition(); chest.style.left = chestPos.x + 'px'; chest.style.top = chestPos.y + 'px'; chest.addEventListener('click', () => { if (isRoundActive) { const bitcoinGain = 0.001 + (Math.random() * 0.002); bitcoin += bitcoinGain; updateBitcoinDisplay(); addCombatLog(`Looted ${bitcoinGain.toFixed(8)} BTC from chest!`); const newPos = getRandomPosition(); chest.style.left = newPos.x + 'px'; chest.style.top = newPos.y + 'px'; } }); arena.appendChild(chest); const weapon = document.createElement('div'); weapon.className = 'interactive-object weapon'; const weaponImg = document.createElement('img'); weaponImg.src = '/sword.png'; weaponImg.alt = 'A pixel art sword with teal and gold hilt'; weaponImg.width = 40; weaponImg.height = 40; weapon.appendChild(weaponImg); const weaponPos = getRandomPosition(); weapon.style.left = weaponPos.x + 'px'; weapon.style.top = weaponPos.y + 'px'; weapon.addEventListener('click', () => { if (isRoundActive) { playerStats.strength.xp += 25; if (playerStats.strength.xp >= 100) { levelUp('strength'); playerStats.strength.xp = 0; } updateStats(); addCombatLog('Gained strength from weapon!'); const newPos = getRandomPosition(); weapon.style.left = newPos.x + 'px'; weapon.style.top = newPos.y + 'px'; } }); arena.appendChild(weapon); for (let i = 0; i < 2; i++) { const flame = document.createElement('div'); flame.className = 'flame'; const flameImg = document.createElement('img'); flameImg.src = '/flame.png'; flameImg.alt = 'A pixel art flame creature'; flameImg.width = 40; flameImg.height = 40; flame.appendChild(flameImg); flame.style.left = `${flamePositions[i].x}px`; flame.style.top = `${flamePositions[i].y}px`; arena.appendChild(flame); } } function addRoundTimer() { const timerDisplay = document.createElement('div'); timerDisplay.id = 'round-timer'; timerDisplay.style.cssText = ` position: absolute; top: 20px; left: 50%; transform: translateX(-50%); font-size: 24px; color: #d4af37; text-shadow: 0 0 10px rgba(212,175,55,0.5); z-index: 100; `; document.getElementById('arena').appendChild(timerDisplay); } function startRound() { isRoundActive = true; roundTime = 60; bitcoin = 0; updateBitcoinDisplay(); initializeInteractiveObjects(); const updateTimer = () => { const timerDisplay = document.getElementById('round-timer'); timerDisplay.textContent = `Time: ${roundTime}s`; if (roundTime <= 0) { clearInterval(roundTimer); endRound(); } else { roundTime--; } }; updateTimer(); roundTimer = setInterval(updateTimer, 1000); } function endRound() { isRoundActive = false; clearInterval(roundTimer); room.store.getAll().then(data => { let winners = []; let maxBitcoin = bitcoin; Object.entries(data).forEach(([username, userData]) => { if (userData.bitcoin > maxBitcoin) { maxBitcoin = userData.bitcoin; winners = [username]; } else if (userData.bitcoin === maxBitcoin) { winners.push(username); } }); showRoundEndPopup(winners, maxBitcoin); }); } function showRoundEndPopup(winners, winningAmount) { const popup = document.createElement('div'); popup.className = 'round-end-popup'; popup.innerHTML = `<h2>Round Over!</h2><p>Winner${winners.length > 1 ? 's' : ''}: ${winners.join(', ')}</p><p>Winning Amount: ${winningAmount.toFixed(8)} BTC</p><button id="return-to-lobby">Return to Lobby</button>`; document.body.appendChild(popup); document.getElementById('return-to-lobby').onclick = () => { returnToLandingPage(); }; } setInterval(() => { if (isRoundActive) { checkFlameCollision(); } }, 500); </script></div><div id="stats-panel"><div class="stat">Attack: <span id="attack-level">1</span><div class="stat-bar"><div class="stat-fill" id="attack-xp" style="width: 0%"></div><span class="xp-text" id="attack-xp-text">0/100 XP</span></div><div class="stat-tooltip">Attack determines your accuracy in combat. Higher Attack levels increase your chance to hit opponents and gain combat experience.</div></div><div class="stat">Strength: <span id="strength-level">1</span><div class="stat-bar"><div class="stat-fill" id="strength-xp" style="width: 0%"></div><span class="xp-text" id="strength-xp-text">0/100 XP</span></div><div class="stat-tooltip">Strength determines your damage output. Each Strength level increases the base damage of your attacks. Dogecoin class gets bonus Strength XP.</div></div><div class="stat">Defense: <span id="defense-level">1</span><div class="stat-bar"><div class="stat-fill" id="defense-xp" style="width: 0%"></div><span class="xp-text" id="defense-xp-text">0/100 XP</span></div><div class="stat-tooltip">Defense reduces incoming damage. Each Defense level provides damage reduction. Shiba Inu class gets bonus Defense XP and natural damage reduction.</div></div></div><div id="combat-log"></div><button id="attack-button">Attack!</button></div><div id="death-popup"><h2>You Lose!</h2><button id="back-to-lobby">Back to Lobby</button></div><div id="chat-box"><div id="chat-messages"></div><div id="chat-input"><input type="text" placeholder="Type your message..."><button>Send</button></div></div><script>const room = new WebsimSocket(); let playerStats = null; let playerMovement = null; let bitcoin = 0; let isInCombat = false; let currentTarget = null; let attackCooldown = false; let inPvPMatch = false; let contextMenu = null; const CLASS_STATS = { pepe: { attack: 2, strength: 2, defense: 2 }, dogecoin: { attack: 1, strength: 2, defense: 4 }, shibainu: { attack: 3, strength: 4, defense: 1 } }; document.querySelectorAll('.character-option').forEach(option => { option.addEventListener('click', () => { document.querySelectorAll('.character-option').forEach(opt => opt.classList.remove('selected')); option.classList.add('selected'); selectedClass = option.dataset.class; validateForm(); }); }); document.getElementById('username-input').addEventListener('input', validateForm); function validateForm() { const username = document.getElementById('username-input').value.trim(); const startButton = document.getElementById('start-game'); const errorMessage = document.getElementById('error-message'); if (username.length >= 3 && selectedClass) { startButton.disabled = false; errorMessage.textContent = ''; } else { startButton.disabled = true; errorMessage.textContent = 'Please enter a username (3+ characters) and select a class'; } } document.getElementById('start-game').addEventListener('click', async () => { const username = document.getElementById('username-input').value.trim(); const errorMessage = document.getElementById('error-message'); if (!username) { errorMessage.textContent = 'Please enter a username'; return; } if (!selectedClass) { errorMessage.textContent = 'Please select a character class'; return; } try { const startButton = document.getElementById('start-game'); startButton.disabled = true; startButton.textContent = 'Entering Arena...'; const classStats = CLASS_STATS[selectedClass]; playerStats = { attack: { level: classStats.attack, xp: 0 }, strength: { level: classStats.strength, xp: 0 }, defense: { level: classStats.defense, xp: 0 }, health: 100 }; currentUsername = username; await room.store.update({ id: 'playerClasses', dependencies: { username, selectedClass }, updateFunction: (data) => { if (!data) data = {}; data[username] = selectedClass; return data; } }); const overlay = document.querySelector('.success-overlay'); const message = document.querySelector('.success-message'); overlay.style.opacity = '1'; message.style.opacity = '1'; playerMovement = { position: { x: Math.random() * 700 + 50, y: Math.random() * 500 + 50 }, speed: 5 }; setTimeout(() => { const loginScreen = document.getElementById('login-screen'); loginScreen.style.opacity = '0'; overlay.style.opacity = '0'; message.style.opacity = '0'; setTimeout(() => { loginScreen.style.display = 'none'; overlay.style.display = 'none'; document.getElementById('crowd-ambient').play(); createPlayerElement(room.party.client.id, username, room.party.client.avatarUrl, selectedClass); addRoundTimer(); startRound(); }, 500); }, 1500); } catch (error) { console.error('Error initializing game:', error); errorMessage.textContent = 'Error joining game. Please try again.'; startButton.disabled = false; startButton.textContent = 'Enter Arena'; } }); const pillars = [ { x: 200, y: 150 }, { x: 600, y: 150 }, { x: 200, y: 450 }, { x: 600, y: 450 } ]; function createPillars() { pillars.forEach(pillar => { const pillarElement = document.createElement('div'); pillarElement.className = 'pillar'; pillarElement.style.left = pillar.x + 'px'; pillarElement.style.top = pillar.y + 'px'; document.getElementById('arena').appendChild(pillarElement); }); } function updateStats() { ['attack', 'strength', 'defense'].forEach(stat => { document.getElementById(`${stat}-level`).textContent = playerStats[stat].level; const xpPercentage = (playerStats[stat].xp % 100); document.getElementById(`${stat}-xp`).style.width = (xpPercentage) + '%'; document.getElementById(`${stat}-xp-text`).textContent = `${Math.floor(xpPercentage)}/100 XP`; }); } document.querySelectorAll('.stat').forEach(stat => { stat.addEventListener('mouseenter', () => { stat.querySelector('.stat-tooltip').style.display = 'block'; }); stat.addEventListener('mouseleave', () => { stat.querySelector('.stat-tooltip').style.display = 'none'; }); }); function addCombatLog(message) { const log = document.getElementById('combat-log'); const entry = document.createElement('div'); entry.textContent = message; log.appendChild(entry); log.scrollTop = log.scrollHeight; } function createPlayerElement(clientId, username, avatarUrl, playerClass) { const playerElement = document.createElement('div'); playerElement.className = `player ${playerClass || 'pepe'}`; playerElement.id = `player-${clientId}`; playerElement.dataset.class = playerClass || 'pepe'; const healthBar = document.createElement('div'); healthBar.className = 'health-bar'; const healthFill = document.createElement('div'); healthFill.className = 'health-fill'; healthFill.style.width = '100%'; healthBar.appendChild(healthFill); const nameTag = document.createElement('div'); nameTag.className = 'player-name'; nameTag.innerHTML = `<span class="player-username">${username}</span>`; const avatar = document.createElement('div'); avatar.className = 'player-avatar'; let characterImage; switch(playerClass) { case 'pepe': characterImage = '/PEPE GAME.jpg'; break; case 'dogecoin': characterImage = '/DOGE GAME.jpeg'; break; case 'shibainu': characterImage = '/SHIBA INU GAME.jpg'; break; default: characterImage = '/PEPE GAME.jpg'; } avatar.style.backgroundImage = `url(${characterImage})`; playerElement.appendChild(healthBar); playerElement.appendChild(nameTag); playerElement.appendChild(avatar); if (clientId === room.party.client.id) { playerElement.style.left = playerMovement.position.x + 'px'; playerElement.style.top = playerMovement.position.y + 'px'; } else { const x = Math.random() * 700 + 50; const y = Math.random() * 500 + 50; playerElement.style.left = x + 'px'; playerElement.style.top = y + 'px'; } document.getElementById('arena').appendChild(playerElement); playerElement.addEventListener('click', () => { if (clientId !== room.party.client.id && !isInCombat) { currentTarget = clientId; document.getElementById('attack-button').style.display = 'block'; selectTarget(currentTarget); addCombatLog(`Selected target: ${username}`); } }); } function movePlayer() { const playerElement = document.getElementById(`player-${room.party.client.id}`); if (!playerElement) return; playerElement.style.left = playerMovement.position.x + 'px'; playerElement.style.top = playerMovement.position.y + 'px'; room.send({ type: 'playerMove', position: playerMovement.position, clientId: room.party.client.id }); } const keys = { w: false, s: false, a: false, d: false }; document.addEventListener('keydown', (e) => { const key = e.key.toLowerCase(); if (keys.hasOwnProperty(key)) { keys[key] = true; } }); document.addEventListener('keyup', (e) => { const key = e.key.toLowerCase(); if (keys.hasOwnProperty(key)) { keys[key] = false; } }); setInterval(() => { let moved = false; if (keys.w && playerMovement.position.y > 50) { playerMovement.position.y -= playerMovement.speed; moved = true; } if (keys.s && playerMovement.position.y < 550) { playerMovement.position.y += playerMovement.speed; moved = true; } if (keys.a && playerMovement.position.x > 50) { playerMovement.position.x -= playerMovement.speed; moved = true; } if (keys.d && playerMovement.position.x < 750) { playerMovement.position.x += playerMovement.speed; moved = true; } if (moved) { movePlayer(); } }, 16); function levelUp(stat) { playerStats[stat].level++; const element = document.createElement('div'); element.className = 'level-up'; element.textContent = `${stat.toUpperCase()} UP!`; element.style.left = '50%'; element.style.top = '50%'; document.getElementById('arena').appendChild(element); setTimeout(() => element.remove(), 1000); document.getElementById('levelup-sound').play(); const totalLevel = playerStats.attack.level + playerStats.strength.level + playerStats.defense.level; room.store.update({ id: 'leaderboard', dependencies: { username: room.party.client.username, totalLevel }, updateFunction: (data) => { if (!data) data = {}; data[room.party.client.username] = { totalLevel }; return data; } }); room.send({ type: 'levelUp', stat: stat, username: room.party.client.username }); } function updateLeaderboard() { room.store.get('leaderboard').then(data => { if (!data) return; const leaderboard = document.getElementById('leaderboard'); const entries = Object.entries(data).sort(([,a], [,b]) => b.totalLevel - a.totalLevel).slice(0, 5); const content = entries.map(([name, stats], i) => `<div class="leaderboard-entry"><span>${i + 1}. ${name}</span><span>Lvl ${stats.totalLevel}</span></div>`).join(''); leaderboard.innerHTML = '<h3>Top Players</h3>' + content; }); } function updateBitcoinDisplay() { document.getElementById('bitcoin-amount').textContent = bitcoin.toFixed(8); } function attack() { if (attackCooldown || !currentTarget) return; const targetClass = document.getElementById(`player-${currentTarget}`).dataset.class; const hitChance = 0.5 + (playerStats.attack.level * 0.05); const hit = Math.random() < hitChance; if (hit) { document.getElementById(`${selectedClass}-attack`).play(); let damage = 10 + (playerStats.strength.level * 2); if (selectedClass === 'shibainu') { damage *= 1.2; } room.send({ type: 'attack', targetId: currentTarget, damage: damage, attackerId: room.party.client.id, attackerName: currentUsername, attackerClass: selectedClass }); let attackXP = 10; let strengthXP = 5; if (selectedClass === 'shibainu') { strengthXP *= 1.5; } playerStats.attack.xp += attackXP; playerStats.strength.xp += strengthXP; checkLevelUps(); } attackCooldown = true; document.getElementById('attack-button').disabled = true; setTimeout(() => { attackCooldown = false; document.getElementById('attack-button').disabled = false; }, 2000); updateStats(); } room.onmessage = (event) => { const data = event.data; switch (data.type) { case 'connected': room.store.get('playerClasses').then(classes => { const playerClass = classes ? classes[data.username] : 'pepe'; createPlayerElement(data.clientId, data.username, data.avatarUrl, playerClass); }); break; case 'disconnected': const playerElement = document.getElementById(`player-${data.clientId}`); if (playerElement) playerElement.remove(); break; case 'playerMove': const movingPlayer = document.getElementById(`player-${data.clientId}`); if (movingPlayer) { movingPlayer.style.left = data.position.x + 'px'; movingPlayer.style.top = data.position.y + 'px'; } break; case 'attack': if (data.targetId === room.party.client.id) { let damage = data.damage; if (selectedClass === 'dogecoin') { damage *= 0.8; playerStats.defense.xp += 7.5; } damage = Math.max(1, damage - (playerStats.defense.level * 1)); playerStats.health -= damage; updatePlayerHP(room.party.client.id, playerStats.health); addCombatLog(`${data.attackerName} hit you for ${damage} damage!`); playerStats.defense.xp += 5; if (playerStats.defense.xp >= 100) { levelUp('defense'); playerStats.defense.xp = 0; } if (playerStats.health <= 0) { addCombatLog('You were defeated!'); handlePlayerDeath(); room.send({ type: 'playerDefeated', winnerId: data.attackerId, loserId: room.party.client.id, bitcoinReward: 0.001 }); } updateStats(); } break; case 'levelUp': addCombatLog(`${data.username} increased their ${data.stat}!`); break; case 'playerDefeated': if (data.winnerId === room.party.client.id) { bitcoin += data.bitcoinReward; updateBitcoinDisplay(); addCombatLog(`You defeated a player and earned ${data.bitcoinReward} BTC!`); } break; case 'chat': const messageDiv = document.createElement('div'); messageDiv.textContent = `${data.username}: ${data.message}`; document.getElementById('chat-messages').appendChild(messageDiv); document.getElementById('chat-messages').scrollTop = document.getElementById('chat-messages').scrollHeight; break; case 'fightRequest': if (data.targetId === room.party.client.id) { showFightRequest(data.requesterName, data.requesterId); } break; case 'fightAccepted': if (data.requesterId === room.party.client.id || data.accepterId === room.party.client.id) { inPvPMatch = true; startPvPMatch(data.requesterId, data.accepterId); } break; case 'fightDeclined': if (data.requesterId === room.party.client.id) { addCombatLog('Fight request declined.'); } break; case 'playerDied': addCombatLog(`${data.username} has died!`); if (isRoundActive) { setTimeout(() => { returnToLandingPage(); }, 3000); } break; } }; room.onPeersChanged = (peers) => { const arena = document.getElementById('arena'); arena.innerHTML = ''; createPillars(); Object.entries(peers).forEach(([clientId, peer]) => { createPlayerElement(clientId, peer.username, peer.avatarUrl); }); updateLeaderboard(); }; document.getElementById('crowd-ambient').play(); const chatInput = document.getElementById('chat-input').querySelector('input'); const chatMessages = document.getElementById('chat-messages'); const sendButton = document.getElementById('chat-input').querySelector('button'); function sendMessage() { const message = chatInput.value.trim(); if (message) { room.send({ type: 'chat', message, username: room.party.client.username }); chatInput.value = ''; chatInput.focus(); } } sendButton.addEventListener('click', sendMessage); chatInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') sendMessage(); }); document.addEventListener('contextmenu', (e) => { const target = e.target.closest('.player'); if (target && target.id !== `player-${room.party.client.id}` && !inPvPMatch) { e.preventDefault(); if (contextMenu) contextMenu.remove(); contextMenu = document.createElement('div'); contextMenu.className = 'context-menu'; contextMenu.innerHTML = `<div class="context-menu-item">Request Fight</div>`; contextMenu.style.left = e.pageX + 'px'; contextMenu.style.top = e.pageY + 'px'; document.body.appendChild(contextMenu); const requestFight = contextMenu.querySelector('.context-menu-item'); requestFight.addEventListener('click', () => { const targetId = target.id.replace('player-', ''); room.send({ type: 'fightRequest', targetId, requesterId: room.party.client.id, requesterName: room.party.client.username }); contextMenu.remove(); }); } } ); document.addEventListener('click', () => { if (contextMenu) contextMenu.remove(); }); function showFightRequest(requesterName, requesterId) { const request = document.createElement('div'); request.className = 'fight-request'; request.innerHTML = `<div>${requesterName} has challenged you to a fight!</div><div class="fight-request-buttons"><button class="accept">Accept</button><button class="decline">Decline</button></div>`; document.body.appendChild(request); request.querySelector('.accept').addEventListener('click', () => { room.send({ type: 'fightAccepted', requesterId, accepterId: room.party.client.id }); request.remove(); }); request.querySelector('.decline').addEventListener('click', () => { room.send({ type: 'fightDeclined', requesterId, declinerId: room.party.client.id }); request.remove(); }); } function startPvPMatch(player1Id, player2Id) { document.querySelectorAll('.player').forEach(player => { const playerId = player.id.replace('player-', ''); if (playerId !== player1Id && playerId !== player2Id) { player.style.display = 'none'; } }); document.getElementById('attack-button').style.display = 'block'; const player1 = document.getElementById(`player-${player1Id}`); const player2 = document.getElementById(`player-${player2Id}`); player1.style.left = '200px'; player1.style.top = '300px'; player2.style.left = '600px'; player2.style.top = '300px'; addCombatLog('PvP match started! Fight!'); } function handlePlayerDeath() { const deathPopup = document.getElementById('death-popup'); deathPopup.style.display = 'block'; document.getElementById('back-to-lobby').onclick = () => { returnToLandingPage(); }; room.send({ type: 'playerDied', playerId: room.party.client.id, username: currentUsername }); } </script></div></div></body></html>